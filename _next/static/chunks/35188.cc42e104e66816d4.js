"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35188,11223],{8984:function(t,e,n){n.d(e,{n:function(){return i}});async function i(t,e){return await t({method:"eth_sendRawTransaction",params:[e]})}},35188:function(t,e,n){n.d(e,{getZkGasFees:function(){return G},z:function(){return U},sendEip712Transaction:function(){return C},P:function(){return L}});var i=n(7529),s=n(11187),r=n(8984),a=n(98511),o=n(4159),h=n(75403);function u(t){if(["string","number"].includes(typeof t)&&!Number.isInteger(Number(t)))throw Error(`Expected value to be an integer to convert to a bigint, got ${t} of type ${typeof t}`);return t instanceof Uint8Array?BigInt((0,h.dg)(t)):BigInt(t)}let c=(t,e)=>"bigint"==typeof t?e(t):Array.isArray(t)?t.map(t=>c(t,e)):t&&"object"==typeof t?Object.fromEntries(Object.entries(t).map(([t,n])=>[t,c(n,e)])):t;var l=n(11223),p=n(83159),f=n(11692),g=n(47537),y=n(61769),d=n(48433);let m=32n*n(50676).rU;var b=n(36117);class x extends b.G{constructor({givenLength:t,maxBytecodeSize:e}){super(`Bytecode cannot be longer than ${e} bytes. Given length: ${t}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class w extends b.G{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class B extends b.G{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}let v=t=>{let e=function(t){let{gas:e,nonce:n,to:i,from:r,value:a,maxFeePerGas:o,maxPriorityFeePerGas:u,paymaster:c,paymasterInput:l,gasPerPubdata:p,data:f,factoryDeps:g}=t;return{txType:113n,from:BigInt(r),to:i?BigInt(i):0n,gasLimit:e??0n,gasPerPubdataByteLimit:p??50000n,maxFeePerGas:o??0n,maxPriorityFeePerGas:u??0n,paymaster:c?BigInt(c):0n,nonce:n?BigInt(n):0n,value:a??0n,data:f||"0x0",factoryDeps:g?.map(t=>h.NC(function(t){let e=(0,s.O0)(t);if(e.length%32!=0)throw new B({givenLength:e.length});if(e.length>m)throw new x({givenLength:e.length,maxBytecodeSize:m});let n=(0,d.J)(e),i=(0,s.O0)(n),r=e.length/32;if(r%2==0)throw new w({givenLengthInWords:r});let a=(0,s.O0)(r),o=(0,y.vk)(a,{size:2}),h=new Uint8Array([1,0]);return i.set(h,0),i.set(o,2),i}(t)))??[],paymasterInput:l||"0x"}}(t);return{domain:{name:"zkSync",version:"2",chainId:t.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:e}};async function C(t){let{account:e,transaction:n}=t,i=await U(t),s=await L({account:e,eip712Transaction:i,chainId:n.chain.id}),o=(0,a.getRpcClient)(n);return{transactionHash:await (0,r.n)(o,s),chain:n.chain,client:n.client}}async function L(t){let{account:e,eip712Transaction:n,chainId:s}=t,r=v(n),a=await e.signTypedData({...r});return function(t){let{chainId:e,gas:n,nonce:s,to:r,from:a,value:o,maxFeePerGas:u,maxPriorityFeePerGas:c,customSignature:p,factoryDeps:f,paymaster:g,paymasterInput:y,gasPerPubdata:d,data:m}=t,b=[s?(0,h.NC)(s):"0x",c?(0,h.NC)(c):"0x",u?(0,h.NC)(u):"0x",n?(0,h.NC)(n):"0x",r??"0x",o?(0,h.NC)(o):"0x",m??"0x0",(0,h.NC)(e),(0,h.NC)(""),(0,h.NC)(""),(0,h.NC)(e),a??"0x",d?(0,h.NC)(d):(0,h.NC)(50000n),f??[],p??"0x",g&&y?[g,y]:[]];return(0,l.concatHex)(["0x71",(0,i.LV)(b)])}({...n,chainId:s,customSignature:a})}async function U(t){let{account:e,transaction:n}=t,{gas:i,maxFeePerGas:s,maxPriorityFeePerGas:r,gasPerPubdata:a}=await G({transaction:n,from:(0,o.Kn)(e.address)});return{...await (0,g.n)({transaction:{...n,gas:i,maxFeePerGas:s,maxPriorityFeePerGas:r},from:e.address}),...n.eip712,gasPerPubdata:a,from:e.address}}async function G(t){let{transaction:e,from:n}=t,[i,s,r,o]=await Promise.all([(0,p.q)(e.gas),(0,p.q)(e.maxFeePerGas),(0,p.q)(e.maxPriorityFeePerGas),(0,p.q)(e.eip712)]),l=o?.gasPerPubdata;if(!i||!s||!r){let t=(0,a.getRpcClient)(e),o=await P({transaction:e,from:n}),p=await t({method:"zks_estimateFee",params:[c(o,h.NC)]});i=2n*u(p.gas_limit),s=2n*u(p.max_fee_per_gas),r=u(p.max_priority_fee_per_gas)||1n,(l=2n*u(p.gas_per_pubdata_limit))<50000n&&(l=50000n)}return{gas:i,maxFeePerGas:s,maxPriorityFeePerGas:r,gasPerPubdata:l}}async function P(t){let{transaction:e,from:n}=t,[i,r,a,o]=await Promise.all([(0,f.encode)(e),(0,p.q)(e.to),(0,p.q)(e.value),(0,p.q)(e.eip712)]),h=o?.gasPerPubdata;return{from:n,to:r,data:i,value:a,gasPerPubdata:h,eip712Meta:{...o,gasPerPubdata:h||50000n,factoryDeps:o?.factoryDeps?.map(t=>Array.from(s.nr(t)))},type:"0x71"}}},11223:function(t,e,n){n.r(e),n.d(e,{concatHex:function(){return s}});var i=n(16643);function s(t){return i.zo(...t)}},50676:function(t,e,n){n.d(e,{$H:function(){return s},rU:function(){return i},zL:function(){return r}});let i=2n**16n-1n,s=2n**96n-1n,r=2n**256n-1n},7529:function(t,e,n){n.d(e,{LV:function(){return o}});var i=n(36117),s=n(11221),r=n(11187),a=n(92106);function o(t,e="hex"){let n=function t(e){return Array.isArray(e)?function(t){let e=t.reduce((t,e)=>t+e.length,0),n=h(e);return{length:e<=55?1+e:1+n+e,encode(i){for(let{encode:s}of(e<=55?i.pushByte(192+e):(i.pushByte(247+n),1===n?i.pushUint8(e):2===n?i.pushUint16(e):3===n?i.pushUint24(e):i.pushUint32(e)),t))s(i)}}}(e.map(e=>t(e))):function(t){let e="string"==typeof t?(0,r.nr)(t):t,n=h(e.length);return{length:1===e.length&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(t){1===e.length&&e[0]<128||(e.length<=55?t.pushByte(128+e.length):(t.pushByte(183+n),1===n?t.pushUint8(e.length):2===n?t.pushUint16(e.length):3===n?t.pushUint24(e.length):t.pushUint32(e.length))),t.pushBytes(e)}}}(e)}(t),i=(0,s.q)(new Uint8Array(n.length));return(n.encode(i),"hex"===e)?(0,a.ci)(i.bytes):i.bytes}function h(t){if(t<256)return 1;if(t<65536)return 2;if(t<16777216)return 3;if(t<4294967296)return 4;throw new i.G("Length is too large.")}},48433:function(t,e,n){n.d(e,{J:function(){return d}});var i=n(41656),s=n(92203);let r=(t,e,n)=>t&e^~t&n,a=(t,e,n)=>t&e^t&n^e&n;class o extends s.kb{constructor(t,e,n,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,s.GL)(this.buffer)}update(t){(0,i.Gg)(this);let{view:e,buffer:n,blockLen:r}=this,a=(t=(0,s.O0)(t)).length;for(let i=0;i<a;){let o=Math.min(r-this.pos,a-i);if(o===r){let e=(0,s.GL)(t);for(;r<=a-i;i+=r)this.process(e,i);continue}n.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,i.Gg)(this),(0,i.J8)(t,this),this.finished=!0;let{buffer:e,view:n,blockLen:r,isLE:a}=this,{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let t=o;t<r;t++)e[t]=0;!function(t,e,n,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,i);let s=BigInt(32),r=BigInt(4294967295),a=Number(n>>s&r),o=Number(n&r),h=i?4:0,u=i?0:4;t.setUint32(e+h,a,i),t.setUint32(e+u,o,i)}(n,r-8,BigInt(8*this.length),a),this.process(n,0);let h=(0,s.GL)(t),u=this.outputLen;if(u%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,l=this.get();if(c>l.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)h.setUint32(4*t,l[t],a)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:n,length:i,finished:s,destroyed:r,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=r,i%e&&t.buffer.set(n),t}}let h=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),u=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class l extends o{constructor(){super(64,32,8,!1),this.A=0|u[0],this.B=0|u[1],this.C=0|u[2],this.D=0|u[3],this.E=0|u[4],this.F=0|u[5],this.G=0|u[6],this.H=0|u[7]}get(){let{A:t,B:e,C:n,D:i,E:s,F:r,G:a,H:o}=this;return[t,e,n,i,s,r,a,o]}set(t,e,n,i,s,r,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|i,this.E=0|s,this.F=0|r,this.G=0|a,this.H=0|o}process(t,e){for(let n=0;n<16;n++,e+=4)c[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=c[t-15],n=c[t-2],i=(0,s.np)(e,7)^(0,s.np)(e,18)^e>>>3,r=(0,s.np)(n,17)^(0,s.np)(n,19)^n>>>10;c[t]=r+c[t-7]+i+c[t-16]|0}let{A:n,B:i,C:o,D:u,E:l,F:p,G:f,H:g}=this;for(let t=0;t<64;t++){let e=g+((0,s.np)(l,6)^(0,s.np)(l,11)^(0,s.np)(l,25))+r(l,p,f)+h[t]+c[t]|0,y=((0,s.np)(n,2)^(0,s.np)(n,13)^(0,s.np)(n,22))+a(n,i,o)|0;g=f,f=p,p=l,l=u+e|0,u=o,o=i,i=n,n=e+y|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,u=u+this.D|0,l=l+this.E|0,p=p+this.F|0,f=f+this.G|0,g=g+this.H|0,this.set(n,i,o,u,l,p,f,g)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let p=(0,s.hE)(()=>new l);var f=n(15102),g=n(11187),y=n(92106);function d(t,e){let n=p((0,f.v)(t,{strict:!1})?(0,g.O0)(t):t);return"bytes"===(e||"hex")?n:(0,y.NC)(n)}}}]);